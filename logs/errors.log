2025-10-11 05:38:04,010 - ERROR - Exception in add_stock: name 'inventory_id' is not defined
Traceback (most recent call last):
  File "c:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 402, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 1113, in add_stock
    return {"success": True, "id": inventory_id, "part_id": request_data.part_id, "quantity": request_data.quantity}
                                   ^^^^^^^^^^^^
NameError: name 'inventory_id' is not defined
2025-10-11 05:38:04,010 - ERROR - Exception in add_stock: name 'inventory_id' is not defined
Traceback (most recent call last):
  File "c:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 402, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 1113, in add_stock
    return {"success": True, "id": inventory_id, "part_id": request_data.part_id, "quantity": request_data.quantity}
                                   ^^^^^^^^^^^^
NameError: name 'inventory_id' is not defined
2025-10-11 07:31:55,644 - ERROR - Failed to get activity logs: Cannot operate on a closed database.
2025-10-11 07:31:55,644 - ERROR - Failed to get activity logs: Cannot operate on a closed database.
2025-10-11 08:10:20,745 - ERROR - Failed to get activity logs: Cannot operate on a closed database.
2025-10-11 08:10:20,745 - ERROR - Failed to get activity logs: Cannot operate on a closed database.
2025-10-11 10:13:24,755 - ERROR - Failed to get activity logs: Cannot operate on a closed database.
2025-10-11 10:13:24,755 - ERROR - Failed to get activity logs: Cannot operate on a closed database.
2025-11-02 06:26:30,854 - ERROR - Failed to log activity: database is locked
2025-11-02 06:26:36,370 - ERROR - Failed to log activity: database is locked
2025-11-02 06:26:41,923 - ERROR - Failed to log activity: database is locked
2025-11-02 06:26:47,486 - ERROR - Failed to log activity: database is locked
2025-11-02 06:26:53,079 - ERROR - Failed to log activity: database is locked
2025-11-03 09:28:44,172 - ERROR - HTTPException in delete_part: Cannot delete part with 1 inventory records. Please remove inventory first.
2025-11-06 16:04:36,226 - ERROR - Failed to log system event: no such table: system_logs
2025-11-06 16:04:52,148 - ERROR - Exception in get_equipment: no such table: equipment
Traceback (most recent call last):
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 438, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 2365, in get_equipment
    cursor.execute(query + " ORDER BY e.next_calibration_date")
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: equipment
2025-11-06 16:04:52,421 - ERROR - Exception in get_equipment_stats: no such table: equipment
Traceback (most recent call last):
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 438, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 2266, in get_equipment_stats
    cursor.execute("SELECT COUNT(*) as count FROM equipment WHERE status = 'active'")
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: equipment
2025-11-06 16:04:52,444 - ERROR - Exception in get_calibration_reminder_days: no such table: system_settings
Traceback (most recent call last):
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 438, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 2642, in get_calibration_reminder_days
    cursor.execute("""
    ~~~~~~~~~~~~~~^^^^
        SELECT setting_value FROM system_settings
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        WHERE setting_key = 'calibration_reminder_days'
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    """)
    ^^^^
sqlite3.OperationalError: no such table: system_settings
2025-11-07 20:10:47,560 - ERROR - HTTPException in create_store: Invalid store type. Must be one of: central, customer_site, engineer, fe_consignment
2025-11-07 20:11:50,313 - ERROR - HTTPException in create_store: Invalid store type. Must be one of: central, customer_site, engineer, fe_consignment
2025-11-07 20:11:57,436 - ERROR - HTTPException in create_store: Invalid store type. Must be one of: central, customer_site, engineer, fe_consignment
2025-11-12 17:29:46,785 - ERROR - HTTPException in create_part: Part number already exists
2025-11-12 19:59:31,723 - ERROR - HTTPException in create_part: Part number already exists
2025-11-12 19:59:44,808 - ERROR - HTTPException in create_part: Part number already exists
2026-02-06 16:14:43,690 - ERROR - HTTPException in transfer_stock: Permission denied for transfer
2026-02-06 16:15:28,878 - ERROR - HTTPException in transfer_stock: Permission denied for transfer
2026-02-14 21:48:28,443 - ERROR - HTTPException in create_part: Part number already exists
2026-02-24 05:38:49,336 - ERROR - Exception in consume_stock: table movements has no column named notes
Traceback (most recent call last):
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 667, in wrapper
    result = await func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\grc2639\Downloads\Allan\projects\inventory\main.py", line 1880, in consume_stock
    cursor.execute(
    ~~~~~~~~~~~~~~^
        """
        ^^^
    ...<12 lines>...
        ),
        ^^
    )
    ^
sqlite3.OperationalError: table movements has no column named notes
2026-02-24 05:38:54,867 - ERROR - Failed to log activity: database is locked
2026-02-24 05:44:44,759 - ERROR - Failed to log system event: database is locked
